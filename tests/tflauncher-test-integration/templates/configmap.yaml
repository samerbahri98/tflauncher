---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "tflauncher-test-integration.labels" . | nindent 4 }}
  name: {{ include "tflauncher-test-integration.fullname" . }}-nginx-conf
data:
  default.conf: |
    server {
        listen 80;
        location / {
            autoindex on;
            root  /var/www/modules;
            types {
                application/tar+gzip tar.gz tgz;
                application/zip      zip;
            }
        }
        location /prv {
            auth_basic "Private Property";
            auth_basic_user_file /etc/nginx/passwd.d/.htpasswd;
            autoindex on;
            root  /var/www/modules;
            types {
                application/tar+gzip tar.gz tgz;
                application/zip      zip;
            }
        }
    }
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "tflauncher-test-integration.labels" . | nindent 4 }}
  name: {{ include "tflauncher-test-integration.fullname" . }}-modules
binaryData:
  redis.tar.gz: |-
    {{ .Files.Get "cache/redis.tgz" | b64enc | indent 4 }}
  redis.tgz: |-
    {{ .Files.Get "cache/redis.tgz" | b64enc | indent 4 }}
  redis.zip: |-
    {{ .Files.Get "cache/redis.zip" | b64enc | indent 4 }}
  postgres.tar.gz: |-
    {{ .Files.Get "cache/postgres.tgz" | b64enc | indent 4 }}
  postgres.tgz: |-
    {{ .Files.Get "cache/postgres.tgz" | b64enc | indent 4 }}
  postgres.zip: |-
    {{ .Files.Get "cache/postgres.zip" | b64enc | indent 4 }}